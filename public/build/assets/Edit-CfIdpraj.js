import{a as m,j as a,L as b,b as j,H as k,r as N,t as f}from"./app-DPU-5xaA.js";import{L as o}from"./label-BkSlMeIg.js";import{S as v}from"./switch-C1S3M_pS.js";import{A as D,b as A,c as w,d as L,e as S,f as C,g as _,h as E}from"./alert-dialog-C-ihqo6s.js";import{A as F}from"./app-layout-i-Fpipg8.js";import"./app-BZ19I5NX.js";import"./app-logo-icon-xsYHPLvD.js";import"./utils-C8uvsPt5.js";import"./index-BtRVbgEg.js";import"./index-DMEkJBJO.js";import"./x-DTHQ_Ru-.js";import"./index-4Ns3tNZl.js";const O=({data:e,setData:s,handleSubmit:c,processing:l,isDirty:d,errors:n={}})=>{const[x]=m.useState({}),u=t=>{t.preventDefault(),c(t)},h=t=>t?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(Number(t)):"",g=t=>Number(t.replace(/[^0-9]/g,""));return a.jsx("form",{onSubmit:u,autoComplete:"off",children:a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm",children:[a.jsxs("div",{className:"space-y-6 p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsxs(o,{className:"mb-2 block text-sm font-medium text-gray-700",children:["Nama Layanan"," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:e.nama_layanan,onChange:t=>s("nama_layanan",t.target.value),className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20",placeholder:"Contoh: Pemeriksaan Umum"}),n.nama_layanan&&a.jsx("p",{className:"mt-1 text-xs text-red-500",children:n.nama_layanan})]}),a.jsxs("div",{children:[a.jsxs(o,{className:"mb-2 block text-sm font-medium text-gray-700",children:["Harga ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:h(e.harga),onChange:t=>s("harga",g(t.target.value)),className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20",placeholder:"Contoh: Rp 50.000"}),n.harga&&a.jsx("p",{className:"mt-1 text-xs text-red-500",children:n.harga})]})]}),a.jsx("div",{className:"rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(o,{className:"text-sm font-medium text-gray-700",children:"Status Layanan"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Tentukan apakah layanan dapat digunakan"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`text-sm font-medium ${e.aktif?"text-emerald-600":"text-gray-400"}`,children:e.aktif?"Aktif":"Nonaktif"}),a.jsx(v,{checked:e.aktif,onCheckedChange:t=>s("aktif",t),className:"data-[state=checked]:bg-emerald-600"})]})]})}),a.jsxs("div",{children:[a.jsxs(o,{className:"mb-2 block text-sm font-medium text-gray-700",children:["Detail Layanan"," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{value:e.keterangan,onChange:t=>s("keterangan",t.target.value),className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20",placeholder:"Jelaskan layanan secara singkat dan jelas",rows:4}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Contoh: Pemeriksaan meliputi cek tekanan darah dan konsultasi"}),n.keterangan&&a.jsx("p",{className:"mt-1 text-xs text-red-500",children:n.keterangan})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 border-t border-gray-200 bg-gray-50 px-6 py-4",children:[a.jsx(b,{href:"/admin/layanan",className:"rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Batal"}),a.jsx("button",{type:"submit",disabled:l||!d,className:`rounded-lg px-4 py-2.5 text-sm font-medium text-white transition disabled:cursor-not-allowed ${l||!d?"bg-emerald-600 opacity-50":"bg-emerald-600 hover:bg-emerald-700"}`,children:l?"Menyimpan...":"Simpan"})]})]})})},P=[{title:"Daftar Layanan",href:"/admin/layanan"},{title:"Edit Layanan",href:""}];function z({layanan:e}){const{data:s,setData:c,processing:l,errors:d}=j({nama_layanan:e.nama_layanan||"",harga:e.harga||"",aktif:e.aktif??!0,keterangan:e.detail_layanan?.map(r=>r.keterangan).join(", ")||""}),[n,x]=m.useState(!1),[u,h]=m.useState(!1),g=(r,i)=>JSON.stringify(r)===JSON.stringify(i);m.useEffect(()=>{const r={nama_layanan:e.nama_layanan||"",harga:e.harga||"",aktif:e.aktif??!0,keterangan:e.detail_layanan?.map(i=>i.keterangan).join(", ")||""};h(!g(s,r))},[s,e]);const t=()=>{const r=new FormData;Object.entries(s).forEach(([i,p])=>{p!=null&&r.append(i,p)}),N.post(`/admin/layanan/${e.id}?_method=PUT`,r,{onSuccess:()=>{f.success("Layanan berhasil diperbarui",{description:"Data layanan telah berhasil disimpan ke sistem."})},onError:i=>{f.error("Gagal memperbarui layanan",{description:"Terjadi kesalahan saat menyimpan data layanan."}),console.error(i)}})},y=r=>{r.preventDefault(),x(!0)};return a.jsxs(F,{breadcrumbs:P,children:[a.jsx(k,{title:"Edit Layanan"}),a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"mb-1 text-2xl font-semibold text-gray-900",children:"Edit Data Layanan"}),a.jsx("p",{className:"mb-6 text-sm text-gray-500",children:"Perbarui informasi layanan di bawah ini."}),a.jsx("div",{className:"overflow-hidden",children:a.jsx(O,{data:s,setData:c,handleSubmit:y,processing:l,isDirty:u,errors:d})})]}),a.jsx(D,{open:n,onOpenChange:x,children:a.jsxs(A,{children:[a.jsxs(w,{children:[a.jsx(L,{children:"Konfirmasi Perubahan"}),a.jsx(S,{children:"Pastikan seluruh informasi layanan sudah benar sebelum menyimpan."})]}),a.jsxs(C,{children:[a.jsx(_,{children:"Batal"}),a.jsx(E,{onClick:t,children:"Simpan"})]})]})})]})}export{z as default};
