import{j as a,u as h,a as r,H as b,t as d,r as j}from"./app-DPU-5xaA.js";import{A as f,b as y,c as k,d as N,e as w,f as A,g as v,h as D}from"./alert-dialog-C-ihqo6s.js";import{L as C}from"./label-BkSlMeIg.js";import{a as L}from"./utils-C8uvsPt5.js";import{A as S}from"./app-layout-i-Fpipg8.js";import"./app-BZ19I5NX.js";import"./index-BtRVbgEg.js";import"./app-logo-icon-xsYHPLvD.js";import"./x-DTHQ_Ru-.js";import"./index-4Ns3tNZl.js";function _({className:s,...t}){return a.jsx("textarea",{"data-slot":"textarea",className:L("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}const x=["No Antrian","Nomor Pasien","Nama Pasien","Penanggung Jawab","Keluhan","Status","Tanggal Dibuat","Aksi"],B=[{title:"Daftar Antrian",href:"/resepsionis/antrian"}];function $(){const{antrian:s}=h().props,[t,P]=r.useState(""),[m,n]=r.useState(!1),[o,p]=r.useState(null),[l,c]=r.useState(""),i=s.filter(e=>(e.pasien_nama.toLowerCase().includes(t.toLowerCase())||e.dokter_nama.toLowerCase().includes(t.toLowerCase())||e.keluhan.toLowerCase().includes(t.toLowerCase()))&&!["selesai","dibatalkan"].includes(e.status.toLowerCase())),u=e=>{p(e),c(""),n(!0)},g=()=>{if(!o||!l.trim()){d.error("Alasan pembatalan wajib diisi");return}j.put(`/resepsionis/antrian/${o}`,{alasan:l.trim()},{onSuccess:()=>{d.success("Antrian berhasil dibatalkan"),n(!1)},onError:()=>d.error("Gagal membatalkan antrian")})};return a.jsxs(S,{breadcrumbs:B,children:[a.jsx(b,{title:"Daftar Antrian"}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Daftar Antrian"}),a.jsx("p",{className:"mt-1 mb-4 text-sm text-gray-500",children:"Kelola data antrian pasien di fasilitas Anda"})]}),a.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsx("tr",{className:"border-b border-gray-200 bg-gray-50",children:x.map(e=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:e},e))})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:i.length>0?i.map(e=>a.jsxs("tr",{className:"transition hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.nomor_antrian??"-"}),a.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.nomor_pasien??"-"}),a.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.pasien_nama?e.pasien_nama:"-"}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.dokter_nama?e.dokter_nama:"-"}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.keluhan?e.keluhan:"-"}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:a.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${e.status==="Menunggu"?"bg-yellow-100 text-yellow-700":e.status==="Sedang Diperiksa"?"bg-blue-100 text-blue-700":e.status==="Dibatalkan"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:e.status})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.created_at?new Date(e.created_at).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-"}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:a.jsx("button",{onClick:()=>u(e.id),className:"rounded-md bg-red-600 px-3 py-1 text-xs font-medium text-white hover:bg-red-700",children:"Batalkan"})})]},e.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:x.length+2,className:"px-6 py-10 text-center text-sm text-gray-500",children:"Tidak ada data antrian."})})})]})})}),a.jsx("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-600",children:a.jsxs("p",{children:["Menampilkan ",i.length," dari"," ",s.length," antrian"]})})]}),a.jsx(f,{open:m,onOpenChange:n,children:a.jsxs(y,{children:[a.jsxs(k,{children:[a.jsx(N,{children:"Batalkan Antrian"}),a.jsx(w,{children:"Masukkan alasan pembatalan antrian ini."})]}),a.jsxs("div",{children:[a.jsxs(C,{htmlFor:"alasan",children:["Alasan ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(_,{id:"alasan",value:l,onChange:e=>c(e.target.value),placeholder:"Contoh: Pasien membatalkan janji",rows:3,className:"mt-1 w-full"})]}),a.jsxs(A,{children:[a.jsx(v,{children:"Batal"}),a.jsx(D,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:g,children:"Ya, Batalkan"})]})]})})]})}export{$ as default};
