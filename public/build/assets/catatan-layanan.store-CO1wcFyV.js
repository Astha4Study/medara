import{G as p}from"./app-DPU-5xaA.js";const k=t=>{let e;const n=new Set,s=(i,v)=>{const g=typeof i=="function"?i(e):i;if(!Object.is(g,e)){const h=e;e=v??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(m=>m(e,h))}},o=()=>e,u={setState:s,getState:o,getInitialState:()=>d,subscribe:i=>(n.add(i),()=>n.delete(i))},d=e=t(s,o,u);return u},E=(t=>t?k(t):k),w=t=>t;function C(t,e=w){const n=p.useSyncExternalStore(t.subscribe,p.useCallback(()=>e(t.getState()),[t,e]),p.useCallback(()=>e(t.getInitialState()),[t,e]));return p.useDebugValue(n),n}const H=t=>{const e=E(t),n=s=>C(e,s);return Object.assign(n,e),n},P=(t=>t?H(t):H);function R(t,e){let n;try{n=t()}catch{return}return{getItem:o=>{var a;const f=d=>d===null?null:JSON.parse(d,void 0),u=(a=n.getItem(o))!=null?a:null;return u instanceof Promise?u.then(f):f(u)},setItem:(o,a)=>n.setItem(o,JSON.stringify(a,void 0)),removeItem:o=>n.removeItem(o)}}const I=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(s){return I(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return I(s)(n)}}}},x=(t,e)=>(n,s,o)=>{let a={storage:R(()=>localStorage),partialize:r=>r,version:0,merge:(r,S)=>({...S,...r}),...e},f=!1;const u=new Set,d=new Set;let i=a.storage;if(!i)return t((...r)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...r)},s,o);const v=()=>{const r=a.partialize({...s()});return i.setItem(a.name,{state:r,version:a.version})},g=o.setState;o.setState=(r,S)=>(g(r,S),v());const h=t((...r)=>(n(...r),v()),s,o);o.getInitialState=()=>h;let m;const _=()=>{var r,S;if(!i)return;f=!1,u.forEach(c=>{var l;return c((l=s())!=null?l:h)});const y=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(r=s())!=null?r:h))||void 0;return I(i.getItem.bind(i))(a.name).then(c=>{if(c)if(typeof c.version=="number"&&c.version!==a.version){if(a.migrate){const l=a.migrate(c.state,c.version);return l instanceof Promise?l.then(b=>[!0,b]):[!0,l]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,c.state];return[!1,void 0]}).then(c=>{var l;const[b,j]=c;if(m=a.merge(j,(l=s())!=null?l:h),n(m,!0),b)return v()}).then(()=>{y?.(m,void 0),m=s(),f=!0,d.forEach(c=>c(m))}).catch(c=>{y?.(void 0,c)})};return o.persist={setOptions:r=>{a={...a,...r},r.storage&&(i=r.storage)},clearStorage:()=>{i?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>f,onHydrate:r=>(u.add(r),()=>{u.delete(r)}),onFinishHydration:r=>(d.add(r),()=>{d.delete(r)})},a.skipHydration||_(),m||h},F=x,O={antrian_id:0,pemeriksaan_fisik_id:null,pasien_id:0,klinik_id:0,keluhan_utama:"",detail_keluhan:"",diagnosa:"",tindakan:"",catatan_lain:"",layanan:[],butuh_resep:!0},L=P()(F(t=>({data:{...O},processing:!1,errors:{},setData:(e,n)=>t(s=>({data:{...s.data,[e]:n}})),setProcessing:e=>t({processing:e}),setErrors:e=>t({errors:e}),reset:()=>t({data:{...O},processing:!1,errors:{}})}),{name:"catatan-layanan",partialize:t=>({data:t.data})}));export{L as u};
