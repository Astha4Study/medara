import{u as p,b,j as a,H as u,L as h,s as y,t as o}from"./app-Cj27gzC2.js";import{A as j}from"./app-layout-DzLWQqg2.js";import"./app-WK0bYjlf.js";import"./app-logo-icon-CCO-RXT9.js";import"./index-DMzJj6dC.js";import"./utils-BCjtJRyR.js";import"./index-Dj6hTyPB.js";import"./index-ToLVEP0o.js";import"./x-CVVHKzOn.js";import"./index-DODXnNab.js";import"./index-4Ns3tNZl.js";const k=[{title:"Dashboard",href:"/super-admin"},{title:"Bug Reports",href:"/super-admin/bug-reports"},{title:"Edit",href:""}],f={dibuka:"bg-blue-100 text-blue-700",sedang_dikerjakan:"bg-indigo-100 text-indigo-700",selesai:"bg-emerald-100 text-emerald-700",ditolak:"bg-gray-200 text-gray-600"},m={rendah:"bg-gray-100 text-gray-700",sedang:"bg-yellow-100 text-yellow-700",tinggi:"bg-red-100 text-red-700"},N={dibuka:"Dibuka",sedang_dikerjakan:"Sedang Dikerjakan",selesai:"Selesai",ditolak:"Ditolak"},c={rendah:"Rendah",sedang:"Sedang",tinggi:"Tinggi"};function A(){const{bugReport:e}=p().props,{data:r,setData:d,patch:g,processing:i}=b({status:e.status,prioritas:e.prioritas,catatan_admin:e.catatan_admin||""}),s=t=>new Date(t).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}),l=t=>{d({status:t,prioritas:e.prioritas,catatan_admin:r.catatan_admin}),g(y("super_admin.bug-reports.update",e.id),{preserveState:!1,onSuccess:()=>o.success("Status berhasil diperbarui"),onError:()=>o.error("Gagal memperbarui status")})},n=e.status==="sedang_dikerjakan",x=e.status!=="selesai"&&e.status!=="ditolak";return a.jsxs(j,{breadcrumbs:k,children:[a.jsx(u,{title:"Edit Bug Report"}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Edit Laporan Bug"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Kelola dan perbarui status laporan bug"})]}),a.jsxs("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e.judul}),a.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Dilaporkan pada"," ",s(e.created_at)]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-medium ${m[e.prioritas]}`,children:["Prioritas:"," ",c[e.prioritas]]}),a.jsxs("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-medium ${m[e.dampak_pelapor]}`,children:["Dampak:"," ",c[e.dampak_pelapor]]}),a.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-medium ${f[e.status]}`,children:N[e.status]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Klinik"}),a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-2.5 text-sm text-gray-900",children:e.klinik.nama_klinik})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Pelapor"}),a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-2.5 text-sm text-gray-900",children:e.pelapor.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tanggal Lapor"}),a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-2.5 text-sm text-gray-900",children:s(e.created_at)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Ditangani Pada"}),a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-2.5 text-sm text-gray-900",children:e.ditangani_pada?s(e.ditangani_pada):"-"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Diselesaikan Pada"}),a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-2.5 text-sm text-gray-900",children:e.diselesaikan_pada?s(e.diselesaikan_pada):"-"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Deskripsi Bug"}),a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-2.5 text-sm text-gray-900",children:e.deskripsi})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Catatan Admin"}),a.jsx("textarea",{className:"w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-900 focus:border-emerald-400 focus:ring-emerald-400 disabled:bg-gray-50 disabled:text-gray-500",value:r.catatan_admin,onChange:t=>d("catatan_admin",t.target.value),placeholder:n?"Tambahkan catatan jika diperlukan":"Tangani untuk menambahkan catatan",rows:4,disabled:!n})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 border-t border-gray-200 bg-gray-50 px-6 py-4",children:[a.jsx(h,{href:"/super-admin/bug-reports",className:"rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Kembali"}),x&&a.jsxs(a.Fragment,{children:[e.status==="dibuka"&&a.jsx("button",{type:"button",onClick:()=>l("sedang_dikerjakan"),disabled:i,className:"rounded-lg bg-emerald-600 px-4 py-2.5 text-sm font-medium text-white hover:bg-emerald-700 disabled:opacity-50",children:"Tangani"}),e.status==="sedang_dikerjakan"&&a.jsx("button",{type:"button",onClick:()=>l("selesai"),disabled:i,className:"rounded-lg bg-emerald-600 px-4 py-2.5 text-sm font-medium text-white hover:bg-emerald-700 disabled:opacity-50",children:"Tandai Selesai"})]})]})]})]})]})}export{A as default};
