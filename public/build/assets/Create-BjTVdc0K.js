import{a as d,j as e,L as k,b as v,H as N,t as x}from"./app-DPU-5xaA.js";import{u as y,M as w,P as _,L as p,a as K,T as C}from"./TileLayer-CVeavWrT.js";import{B as u}from"./building-2-BE9RAvNv.js";import{M as g,P as h,a as b,B as f,C as T,A as L}from"./phone-DYECNFkh.js";import{E as M,I as j}from"./image-BUqEHnll.js";import{U as P,A as E}from"./app-layout-i-Fpipg8.js";import"./app-BZ19I5NX.js";import"./utils-C8uvsPt5.js";import"./app-logo-icon-xsYHPLvD.js";import"./index-BtRVbgEg.js";import"./x-DTHQ_Ru-.js";import"./index-4Ns3tNZl.js";const S=p.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});p.Marker.prototype.options.icon=S;const U=({latitude:s,longitude:l,setData:t})=>{const[o,n]=d.useState([Number(s)||-7.7956,Number(l)||110.3695]),i=y({click(r){n([r.latlng.lat,r.latlng.lng]),t("latitude",r.latlng.lat),t("longitude",r.latlng.lng)},locationfound(r){n([r.latlng.lat,r.latlng.lng]),t("latitude",r.latlng.lat),t("longitude",r.latlng.lng),i.flyTo(r.latlng,15)}});return d.useEffect(()=>{i.locate({setView:!0,maxZoom:16})},[i]),e.jsx(w,{draggable:!0,position:o,eventHandlers:{dragend:r=>{const a=r.target.getLatLng();n([a.lat,a.lng]),t("latitude",a.lat),t("longitude",a.lng)}},children:e.jsx(_,{children:"Geser marker atau klik peta untuk ubah posisi."})})},A=({data:s,setData:l,handleSubmit:t,handleChangeFile:o,processing:n})=>{const[i,r]=d.useState({}),m=a=>{if(a.preventDefault(),!s.no_telepon.trim()){r({no_telepon:"Nomor telepon wajib diisi."});return}r({}),t(a)};return e.jsxs("form",{onSubmit:m,autoComplete:"off",className:"col-span-2 space-y-6 rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(u,{className:"h-4 w-4 text-emerald-600"}),"Nama Klinik ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.nama_klinik,onChange:a=>l("nama_klinik",a.target.value),className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20",placeholder:"Contoh: Klinik Amarta"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Jenis Klinik ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:s.jenis_klinik,onChange:a=>l("jenis_klinik",a.target.value),className:"w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20",children:[e.jsx("option",{value:"",children:"Pilih Jenis Klinik"}),e.jsx("option",{value:"Umum",children:"Umum"}),e.jsx("option",{value:"Gigi",children:"Gigi"}),e.jsx("option",{value:"THT",children:"THT"}),e.jsx("option",{value:"Kulit",children:"Kulit"}),e.jsx("option",{value:"Kandungan",children:"Kandungan"}),e.jsx("option",{value:"Anak",children:"Anak"}),e.jsx("option",{value:"Bedah",children:"Bedah"}),e.jsx("option",{value:"Mata",children:"Mata"}),e.jsx("option",{value:"Saraf",children:"Saraf"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(g,{className:"h-4 w-4 text-emerald-600"}),"Alamat ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.alamat,onChange:a=>l("alamat",a.target.value),className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20",placeholder:"Masukkan alamat lengkap"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Kota",value:s.kota,onChange:a=>l("kota",a.target.value),className:"rounded-lg border border-gray-200 px-4 py-2.5 text-sm transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20"}),e.jsx("input",{type:"text",placeholder:"Provinsi",value:s.provinsi,onChange:a=>l("provinsi",a.target.value),className:"rounded-lg border border-gray-200 px-4 py-2.5 text-sm transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(h,{className:"h-4 w-4 text-emerald-600"})," Telepon"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.no_telepon,onChange:a=>l("no_telepon",a.target.value),className:`w-full rounded-lg border ${i.no_telepon?"border-red-400":"border-gray-200"} px-4 py-2.5 text-sm transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20`,placeholder:"+62"}),i.no_telepon&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:i.no_telepon})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(b,{className:"h-4 w-4 text-emerald-600"})," Email"]}),e.jsx("input",{type:"email",value:s.email,onChange:a=>l("email",a.target.value),className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20",placeholder:"example@mail.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(f,{className:"h-4 w-4 text-emerald-600"}),"Kapasitas Total ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:s.kapasitas_total,onChange:a=>{const c=Number(a.target.value);l("kapasitas_total",c),l("kapasitas_tersedia",c)},className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20",placeholder:"100"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Tempat Tersedia ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:s.kapasitas_tersedia,disabled:!0,className:"w-full rounded-lg border border-gray-200 bg-gray-100 px-4 py-2.5 text-sm text-gray-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(M,{className:"h-4 w-4 text-emerald-600"}),"Koordinat Lokasi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Latitude",value:s.latitude,disabled:!0,onChange:a=>l("latitude",a.target.value),className:"rounded-lg border border-gray-200 bg-gray-100 px-4 py-2.5 text-sm transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20"}),e.jsx("input",{type:"text",placeholder:"Longitude",value:s.longitude,disabled:!0,onChange:a=>l("longitude",a.target.value),className:"rounded-lg border border-gray-200 bg-gray-100 px-4 py-2.5 text-sm transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20"})]})]}),e.jsx("div",{className:"mt-4 h-[300px] w-full overflow-hidden rounded-lg border border-gray-200",children:e.jsxs(K,{center:[Number(s.latitude)||-7.7956,Number(s.longitude)||110.3695],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[e.jsx(C,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(U,{latitude:s.latitude,longitude:s.longitude,setData:l})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:["Deskripsi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:s.deskripsi,onChange:a=>l("deskripsi",a.target.value),rows:4,placeholder:"Tuliskan deskripsi singkat tentang Klinik...",className:"w-full resize-none rounded-lg border border-gray-200 px-4 py-2.5 text-sm transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(j,{className:"h-4 w-4 text-emerald-600"})," Gambar"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:o,className:"block w-full cursor-pointer rounded-lg border border-gray-200 text-sm text-gray-500 file:mr-4 file:rounded-lg file:border-0 file:bg-emerald-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-emerald-700 hover:file:bg-emerald-100"})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[e.jsx(k,{href:"/admin/klinik",className:"rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",disabled:n,className:"rounded-lg bg-emerald-600 px-4 py-2.5 text-sm font-medium text-white transition hover:bg-emerald-700 disabled:opacity-50",children:n?"Menyimpan...":"Simpan"})]})]})},B=({data:s})=>{const[l,t]=d.useState(null);d.useEffect(()=>{if(s.gambar){const i=URL.createObjectURL(s.gambar);return t(i),()=>URL.revokeObjectURL(i)}else t(null)},[s.gambar]);const o=(s.kapasitas_total??0)-(s.kapasitas_tersedia??0),n=s.kapasitas_total&&s.kapasitas_total>0?Math.round(o/s.kapasitas_total*100):0;return e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm transition hover:shadow-md",children:[e.jsxs("div",{className:"relative flex h-48 items-center justify-center overflow-hidden rounded-t-2xl bg-gray-100",children:[l?e.jsx("img",{src:l,alt:s.nama_klinik||"Preview",className:"absolute inset-0 h-full w-full object-cover"}):e.jsx(j,{className:"h-12 w-12 text-gray-400"}),e.jsx("div",{className:"absolute inset-0 bg-black/30"}),e.jsx("div",{className:"absolute top-3 left-3 flex flex-wrap gap-2",children:s.jenis_klinik&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-emerald-600/90 px-2 py-1 text-xs font-semibold text-white shadow-sm",children:[e.jsx(u,{className:"h-3 w-3"}),s.jenis_klinik]})}),e.jsxs("div",{className:"absolute bottom-3 left-3 max-w-[90%] text-white drop-shadow-lg",children:[s.alamat&&e.jsxs("div",{className:"mb-1 inline-flex items-center gap-1 text-sm",children:[e.jsx(g,{size:16}),e.jsxs("p",{className:"line-clamp-2 max-w-[calc(100%-20px)] overflow-hidden",children:[s.alamat,s.kota?`, ${s.kota}`:"",s.provinsi?`, ${s.provinsi}`:""]})]}),e.jsx("h2",{className:"line-clamp-2 text-lg font-bold",children:s.nama_klinik||"Nama Klinik"})]})]}),e.jsx("div",{className:"overflow-hidden p-3 text-sm text-gray-700",children:e.jsx("p",{className:"line-clamp-3",children:s.deskripsi||"Belum ada deskripsi klinik."})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t border-gray-100 p-3 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4 text-emerald-600"}),e.jsxs("span",{children:["Total: ",s.kapasitas_total??0]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"h-4 w-4 text-emerald-600"}),e.jsxs("span",{children:["Tersedia: ",s.kapasitas_tersedia??0]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"h-4 w-4 text-emerald-600"}),e.jsxs("span",{children:["Terisi: ",o]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"h-4 w-4 text-emerald-600"}),e.jsxs("span",{children:[n,"% Okupansi"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t border-gray-100 p-3 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-4 w-4 text-emerald-600"}),e.jsx("span",{children:s.no_telepon||"-"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"h-4 w-4 text-emerald-600"}),e.jsx("span",{children:s.email||"-"})]})]}),e.jsx("div",{className:"flex items-center gap-1 border-t border-gray-100 p-3 text-xs text-gray-600",children:e.jsx("span",{className:"truncate",children:s.latitude&&s.longitude?`${s.latitude}, ${s.longitude}`:"Koordinat belum diisi"})})]})};function q(){const{data:s,setData:l,post:t,processing:o,reset:n}=v({nama_klinik:"",jenis_klinik:"",alamat:"",kota:"",provinsi:"",no_telepon:"",email:"",deskripsi:"",latitude:"",longitude:"",kapasitas_total:0,kapasitas_tersedia:0,spesialisasi:"",punya_apoteker:0,punya_server:0,gambar:null}),i=a=>{a.target.files&&a.target.files[0]&&l("gambar",a.target.files[0])},r=a=>{a.preventDefault(),t("/admin/klinik",{onSuccess:()=>{x.success("Klinik berhasil dibuat",{description:"Data klinik baru telah ditambahkan ke sistem."}),n()},onError:()=>{x.error("Gagal membuat klinik",{description:"Terjadi kesalahan saat menyimpan data klinik."})},forceFormData:!0})},m=[{title:"Klinik Kamu",href:"/klinik"},{title:"Tambah Klinik",href:""}];return e.jsxs(E,{breadcrumbs:m,children:[e.jsx(N,{title:"Tambah Klinik"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"mb-1 text-2xl font-semibold text-gray-900",children:"Tambah Data Klinik"}),e.jsx("p",{className:"mb-6 text-sm text-gray-500",children:"Lengkapi data klinik di bawah untuk menambahkan ke daftar."}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(A,{data:s,setData:l,handleSubmit:r,handleChangeFile:i,processing:o})}),e.jsx("div",{className:"self-start",children:e.jsx(B,{data:s})})]})]})]})}export{q as default};
